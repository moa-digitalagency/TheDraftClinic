{% extends 'layouts/admin_base.html' %}

{% block title %}Admin - Modifier {{ admin.full_name }}{% endblock %}
{% block page_title %}Modifier administrateur{% endblock %}

{% block admin_content %}
<div class="mb-6">
    <a href="{{ url_for('admin.list_admins') }}" class="inline-flex items-center text-gray-400 hover:text-white transition-colors">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
        Retour a la liste
    </a>
</div>

<div class="max-w-2xl">
    <div class="bg-slate-800 rounded-2xl border border-slate-700 p-6">
        <div class="flex items-center gap-4 mb-6">
            <div class="w-16 h-16 rounded-full {% if admin.admin_role == 'super_admin' %}bg-gradient-to-r from-amber-500 to-orange-600{% else %}gradient-bg{% endif %} flex items-center justify-center">
                <span class="text-white font-bold text-xl">{{ admin.first_name[0] }}{{ admin.last_name[0] }}</span>
            </div>
            <div>
                <h2 class="text-xl font-bold text-white">{{ admin.full_name }}</h2>
                <p class="text-gray-400">{{ admin.email }}</p>
            </div>
        </div>
        
        <form method="POST" action="{{ url_for('admin.edit_admin', admin_id=admin.id) }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            
            <div class="mb-4">
                <label for="admin_role" class="block text-sm font-medium text-gray-300 mb-2">Role</label>
                <select id="admin_role" name="admin_role"
                        class="w-full px-4 py-3 bg-slate-900 border border-slate-700 rounded-lg text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent">
                    <option value="admin" {% if admin.admin_role == 'admin' %}selected{% endif %}>Administrateur</option>
                    <option value="super_admin" {% if admin.admin_role == 'super_admin' %}selected{% endif %}>Super Administrateur</option>
                </select>
            </div>
            
            <div class="mb-4">
                <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" name="account_active" {% if admin.account_active %}checked{% endif %}
                           class="w-5 h-5 rounded border-slate-600 bg-slate-900 text-primary-500 focus:ring-primary-500">
                    <span class="text-gray-300">Compte actif</span>
                </label>
                <p class="text-gray-500 text-sm mt-1 ml-8">Un compte inactif ne peut pas se connecter</p>
            </div>
            
            <div class="mb-6">
                <label for="new_password" class="block text-sm font-medium text-gray-300 mb-2">Nouveau mot de passe (optionnel)</label>
                <input type="password" id="new_password" name="new_password" minlength="8"
                       class="w-full px-4 py-3 bg-slate-900 border border-slate-700 rounded-lg text-white placeholder-gray-500 focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                       placeholder="Laissez vide pour ne pas changer">
                <p class="text-gray-500 text-sm mt-1">Minimum 8 caracteres si vous souhaitez le changer</p>
            </div>
            
            <div class="flex items-center gap-4">
                <button type="submit" 
                        class="px-6 py-3 gradient-bg text-white rounded-lg font-medium hover:opacity-90 transition-opacity">
                    Enregistrer les modifications
                </button>
                <a href="{{ url_for('admin.list_admins') }}" 
                   class="px-6 py-3 bg-slate-700 text-gray-300 rounded-lg font-medium hover:bg-slate-600 transition-colors">
                    Annuler
                </a>
            </div>
        </form>
    </div>
    
    <div class="mt-6 bg-slate-800 rounded-2xl border border-slate-700 p-6">
        <h3 class="text-lg font-semibold text-white mb-4">Informations</h3>
        <dl class="space-y-3">
            <div class="flex justify-between">
                <dt class="text-gray-400">Date de creation</dt>
                <dd class="text-white">{{ admin.created_at.strftime('%d/%m/%Y a %H:%M') if admin.created_at else '-' }}</dd>
            </div>
            <div class="flex justify-between">
                <dt class="text-gray-400">Derniere connexion</dt>
                <dd class="text-white">{{ admin.last_login.strftime('%d/%m/%Y a %H:%M') if admin.last_login else 'Jamais' }}</dd>
            </div>
        </dl>
    </div>
</div>
{% endblock %}
