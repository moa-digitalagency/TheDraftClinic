{% extends "layouts/base.html" %}

{% block title %}Paramètres avancés{% endblock %}

{% block body %}
<div class="min-h-screen bg-gray-100">
    <nav class="bg-gray-800 text-white py-4">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center">
                <a href="{{ url_for('admin.dashboard') }}" class="text-xl font-bold">Administration</a>
                <a href="{{ url_for('admin_settings.settings') }}" class="hover:text-gray-300">Retour aux paramètres</a>
            </div>
        </div>
    </nav>

    <main class="max-w-2xl mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-8">Paramètres avancés</h1>

        <form method="POST" class="bg-white rounded-xl shadow p-6 space-y-6">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            
            <div class="border-b pb-6">
                <h2 class="text-lg font-semibold text-gray-900 mb-4">Analytics</h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Google Analytics ID</label>
                        <input type="text" name="google_analytics_id" value="{{ settings.google_analytics_id or '' }}" placeholder="UA-XXXXXXXX-X ou G-XXXXXXXXXX"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Google Tag Manager ID</label>
                        <input type="text" name="google_tag_manager_id" value="{{ settings.google_tag_manager_id or '' }}" placeholder="GTM-XXXXXXX"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Facebook Pixel ID</label>
                        <input type="text" name="facebook_pixel_id" value="{{ settings.facebook_pixel_id or '' }}"
                               class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500">
                    </div>
                </div>
            </div>

            <div class="border-b pb-6">
                <h2 class="text-lg font-semibold text-gray-900 mb-4">Scripts personnalisés</h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Scripts dans &lt;head&gt;</label>
                        <textarea name="custom_head_scripts" rows="4" placeholder="<!-- Vos scripts ici -->"
                                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 font-mono text-sm">{{ settings.custom_head_scripts or '' }}</textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Scripts en fin de &lt;body&gt;</label>
                        <textarea name="custom_body_scripts" rows="4" placeholder="<!-- Vos scripts ici -->"
                                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 font-mono text-sm">{{ settings.custom_body_scripts or '' }}</textarea>
                    </div>
                </div>
            </div>

            <div>
                <h2 class="text-lg font-semibold text-gray-900 mb-4">Mode maintenance</h2>
                
                <div class="space-y-4">
                    <div class="flex items-center">
                        <input type="checkbox" name="maintenance_mode" id="maintenance_mode" {{ 'checked' if settings.maintenance_mode }}
                               class="h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded">
                        <label for="maintenance_mode" class="ml-2 block text-sm text-gray-700">Activer le mode maintenance</label>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Message de maintenance</label>
                        <textarea name="maintenance_message" rows="2"
                                  class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500">{{ settings.maintenance_message or 'Le site est actuellement en maintenance. Veuillez revenir plus tard.' }}</textarea>
                    </div>
                </div>
            </div>

            <div class="pt-4">
                <button type="submit" class="w-full bg-primary-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-primary-700 transition">
                    Enregistrer les modifications
                </button>
            </div>
        </form>
    </main>
</div>
{% endblock %}
